<!DOCTYPE html>
<html lang="en">


<h2>Book Appointment</h2>
<div>
    Doctor: {{ doctor.name }}
    Dept: {{ doctor.department.name }}
</div>
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div>
    {{ message }}
</div>
{% endfor %}
{% endif %}
{% endwith %}

<div>
    {% for day in days %}
    <div>
        <div>
            {{ day.display_date }}
        </div>

        <div>
            {% for slot in day.slots %}

            {% if slot.available %}
            <form action="{{ url_for('book_appointment') }}" method="POST">
                <input type="hidden" name="doctor_id" value="{{ doctor.id }}">
                <input type="hidden" name="x" value="{{ day.date }}">
                <input type="hidden" name="time_slot" value="{{ slot.time }}">

                <button type="submit">
                    {{ slot.time }}
                </button>
            </form>
            {% else %}
            <button disabled>
                {{ slot.time }}
            </button>
            {% endif %}

            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>

<br>
<a href="{{ url_for('pat') }}">Back to Dashboard</a>
</div>

</body>

</html>